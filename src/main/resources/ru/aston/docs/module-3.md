# Основы Java: Модуль 3

## Исключения

Исключения — механизм обработки ошибок во время выполнения программы.

### Иерархия исключений

- **Throwable**: Базовый класс для всех исключений и ошибок.
    - **Error**: Серьезные проблемы, не подлежащие обработке (например, `OutOfMemoryError`).
    - **Exception**: Ошибки, которые можно обработать.
        - **Checked**: Проверяемые компилятором, требуют обработки (например, `IOException`).
        - **Unchecked**: Непроверяемые, возникают во время выполнения (например,
          `NullPointerException`).

### Способы обработки исключений

- **try-catch**: Перехватывает и обрабатывает исключения.
  ```java
  try {
      int x = 1 / 0;
  } catch (ArithmeticException e) {
      System.out.println("Ошибка: " + e.getMessage());
  }
  ```
- **throws**: Объявляет, что метод может выбросить исключение.
  ```java
  void readFile() throws IOException { /* код */ }
  ```
- **throw**: Генерирует исключение вручную.
  ```java
  throw new IllegalArgumentException("Недопустимое значение");
  ```

### try с ресурсами

Конструкция `try-with-resources` автоматически закрывает ресурсы, реализующие интерфейс
`AutoCloseable`.

- Пример:
  ```java
  try (FileInputStream fis = new FileInputStream("file.txt")) {
      fis.read();
  } catch (IOException e) {
      System.out.println("Ошибка: " + e.getMessage());
  }
  ```
- Преимущество: Упрощает управление ресурсами, предотвращает утечки.

## Ввод-вывод

Система ввода-вывода (I/O) позволяет читать и записывать данные из/в файлы, сеть, консоль.

### Основные классы для работы с потоками ввода-вывода

- **Байтовые потоки** (для бинарных данных):
    - `InputStream`, `OutputStream` (абстрактные базовые классы).
    - `FileInputStream`, `FileOutputStream`: Чтение/запись файлов.
    - `BufferedInputStream`, `BufferedOutputStream`: Буферизация для оптимизации.
- **Символьные потоки** (для текстовых данных):
    - `Reader`, `Writer` (абстрактные базовые классы).
    - `FileReader`, `FileWriter`: Чтение/запись текстовых файлов.
    - `BufferedReader`, `BufferedWriter`: Буферизация текстов.
- **Другие**:
    - `PrintStream`, `PrintWriter`: Удобный вывод (например, `System.out`).
    - `DataInputStream`, `DataOutputStream`: Работа с примитивными типами.

### Основные правила работы с потоками ввода-вывода

- Закрывать потоки после использования (желательно через `try-with-resources`).
- Использовать буферизацию (`Buffered*`) для повышения производительности.
- Обрабатывать исключения (`IOException`).
- Проверять доступность данных перед чтением.

## Сериализация

Сериализация — процесс преобразования объекта в поток байтов для сохранения или передачи.

- Реализуется через интерфейс `Serializable`.
- Ключевые классы:
    - `ObjectOutputStream`: Записывает объект в поток.
    - `ObjectInputStream`: Читает объект из потока.
- Пример:
  ```java
  class Person implements Serializable {
      String name;
  }
  // Сериализация
  try (ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream("person.ser"))) {
      oos.writeObject(new Person());
  }
  // Десериализация
  try (ObjectInputStream ois = new ObjectInputStream(new FileInputStream("person.ser"))) {
      Person p = (Person) ois.readObject();
  }
  ```
- Особенности:
    - Поля `transient` не сериализуются.
    - Классы должны быть совместимы при десериализации.

## Сборщики проектов (Gradle, Maven)

Сборщики автоматизируют сборку, тестирование и управление зависимостями.

- **Maven**:
    - Использует `pom.xml` для конфигурации.
    - Централизованный репозиторий зависимостей (Maven Central).
    - Стандартизированные фазы сборки.
- **Gradle**:
    - Использует `build.gradle` (Groovy/Kotlin DSL).
    - Более гибкий, чем Maven.
    - Быстрее за счет инкрементальной сборки.

### Этапы сборки в Maven

- **validate**: Проверяет корректность проекта.
- **compile**: Компилирует исходный код.
- **test**: Запускает тесты.
- **package**: Создает JAR/WAR файл.
- **install**: Устанавливает артефакт в локальный репозиторий.
- **deploy**: Публикует артефакт в удаленный репозиторий.

### Хранение зависимостей

Скачанные зависимости хранятся в локальном репозитории Maven/Gradle:

- **Maven**: `~/.m2/repository`.
- **Gradle**: `~/.gradle/caches`.

## Git

Git — система контроля версий для управления исходным кодом.

### push, pull, fetch

- **push**: Отправляет локальные коммиты в удаленный репозиторий.
  ```bash
  git push origin main
  ```
- **pull**: Загружает изменения из удаленного репозитория и сливает их с локальной веткой.
  ```bash
  git pull origin main
  ```
- **fetch**: Загружает изменения из удаленного репозитория без слияния.
  ```bash
  git fetch origin
  ```

### Варианты слияния веток (merge, rebase)

- **merge**:
    - Создает коммит слияния, сохраняя историю обеих веток.
    - Пример:
      ```bash
      git checkout main
      git merge feature
      ```
    - Плюсы: Сохраняет историю, безопасно.
    - Минусы: Усложняет историю.
- **rebase**:
    - Переписывает историю, перенося коммиты одной ветки на другую.
    - Пример:
      ```bash
      git checkout feature
      git rebase main
      ```
    - Плюсы: Линейная история.
    - Минусы: Может вызвать конфликты, опасно для общих веток.

### cherry-pick, squash

- **cherry-pick**: Копирует отдельный коммит в текущую ветку.
  ```bash
  git cherry-pick <commit-hash>
  ```
- **squash**: Объединяет несколько коммитов в один при слиянии или ребейзе.
    - Пример (интерактивный ребейз):
      ```bash
      git rebase -i HEAD~3
      ```
      Заменить `pick` на `squash` для объединения.

### patch, stash

- **patch**: Создает/применяет изменения в виде патча.
    - Создание:
      ```bash
      git diff > changes.patch
      ```
    - Применение:
      ```bash
      git apply changes.patch
      ```
- **stash**: Сохраняет незакоммиченные изменения и очищает рабочую директорию.
    - Сохранение:
      ```bash
      git stash
      ```
    - Восстановление:
      ```bash
      git stash pop
      ```

### reset, revert

- **reset**: Откатывает ветку до указанного состояния.
    - Мягкий (`--soft`): Сохраняет изменения в индексе.
    - Жесткий (`--hard`): Удаляет изменения.
    - Пример:
      ```bash
      git reset --hard HEAD~1
      ```
- **revert**: Создает новый коммит, отменяющий изменения указанного коммита.
    - Пример:
      ```bash
      git revert <commit-hash>
      ```
    - Используется для безопасной отмены в общих ветках.